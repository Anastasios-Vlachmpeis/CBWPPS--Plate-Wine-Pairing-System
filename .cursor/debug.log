{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "menu_extractor.py:217", "message": "Raw response captured", "data": {"response_length": 6170, "first_500": "{\n  \"dishes\": [\n    {\n      \"dish_name\": \"Normandy Oyster\",\n      \"category\": \"appetizer\",\n      \"key_ingredients\": [\"Normandy oyster\"],\n      \"dominant_flavors\": [\"Salty\", \"Light\"]\n    },\n    {\n      \"dish_name\": \"Gillardeau Oyster\",\n      \"category\": \"appetizer\",\n      \"key_ingredients\": [\"Gillardeau oyster\"],\n      \"dominant_flavors\": [\"Salty\", \"Light\"]\n    },\n    {\n      \"dish_name\": \"Caviar with Blini and Cr\u00e8me Fra\u00eeche\",\n      \"category\": \"appetizer\",\n      \"key_ingredients\": [\"Asetra cavia", "last_500": "nts\": [\"Onion\"],\n      \"dominant_flavors\": [\"Sweet\", \"Savory\"]\n    },\n    {\n      \"dish_name\": \"Brussels Sprouts with Chestnut and Bacon\",\n      \"category\": \"appetizer\",\n      \"key_ingredients\": [\"Brussels sprouts\", \"Chestnut\", \"Bacon\"],\n      \"dominant_flavors\": [\"Bitter\", \"Nutty\", \"Salty\", \"Smoky\"]\n    },\n    {\n      \"dish_name\": \"Seasonal Salad\",\n      \"category\": \"salad\",\n      \"key_ingredients\": [\"Seasonal vegetables\"],\n      \"dominant_flavors\": [\"Light\", \"Fresh\"]\n    }\n  ],\n  \"wines\": []\n}"}, "timestamp": 1770493648764}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "menu_extractor.py:233", "message": "Cleaned response before parsing", "data": {"cleaned_length": 6170, "first_500": "{\n  \"dishes\": [\n    {\n      \"dish_name\": \"Normandy Oyster\",\n      \"category\": \"appetizer\",\n      \"key_ingredients\": [\"Normandy oyster\"],\n      \"dominant_flavors\": [\"Salty\", \"Light\"]\n    },\n    {\n      \"dish_name\": \"Gillardeau Oyster\",\n      \"category\": \"appetizer\",\n      \"key_ingredients\": [\"Gillardeau oyster\"],\n      \"dominant_flavors\": [\"Salty\", \"Light\"]\n    },\n    {\n      \"dish_name\": \"Caviar with Blini and Cr\u00e8me Fra\u00eeche\",\n      \"category\": \"appetizer\",\n      \"key_ingredients\": [\"Asetra cavia", "last_500": "nts\": [\"Onion\"],\n      \"dominant_flavors\": [\"Sweet\", \"Savory\"]\n    },\n    {\n      \"dish_name\": \"Brussels Sprouts with Chestnut and Bacon\",\n      \"category\": \"appetizer\",\n      \"key_ingredients\": [\"Brussels sprouts\", \"Chestnut\", \"Bacon\"],\n      \"dominant_flavors\": [\"Bitter\", \"Nutty\", \"Salty\", \"Smoky\"]\n    },\n    {\n      \"dish_name\": \"Seasonal Salad\",\n      \"category\": \"salad\",\n      \"key_ingredients\": [\"Seasonal vegetables\"],\n      \"dominant_flavors\": [\"Light\", \"Fresh\"]\n    }\n  ],\n  \"wines\": []\n}"}, "timestamp": 1770493648765}
{"sessionId": "debug-session", "runId": "post-fix", "hypothesisId": "B", "location": "menu_extractor.py:240", "message": "Truncation check", "data": {"is_truncated": false, "response_length": 6170}, "timestamp": 1770493648765}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "wine_manager.py:315", "message": "Raw Gemini response", "data": {"response_length": 880, "first_500": "{\n  \"wines\": [\n    {\n      \"wine_name\": \"Gros Manseng 'Cos De La Roque', Gascogne, Domaine Saint Lannes\",\n      \"type_name\": \"White\",\n      \"region\": \"Gascogne\",\n      \"winery\": \"Domaine Saint Lannes\",\n      \"country\": \"France\",\n      \"grapes\": [\n        \"Gros Manseng\"\n      ]\n    },\n    {\n      \"wine_name\": \"Riesling, 'Gravel', Rheingau, Weingut Faust*\",\n      \"type_name\": \"White\",\n      \"region\": \"Rheingau\",\n      \"winery\": \"Weingut Faust\",\n      \"country\": \"Germany\",\n      \"grapes\": [\n       ", "last_500": "ite\",\n      \"region\": \"Rheingau\",\n      \"winery\": \"Weingut Faust\",\n      \"country\": \"Germany\",\n      \"grapes\": [\n        \"Riesling\"\n      ]\n    },\n    {\n      \"wine_name\": \"Catarratto, Kima, Sicily, Possente*\",\n      \"type_name\": \"White\",\n      \"region\": \"Sicily\",\n      \"winery\": \"Possente\",\n      \"country\": \"Italy\",\n      \"grapes\": [\n        \"Catarratto\"\n      ]\n    },\n    {\n      \"wine_name\": \"Chardonnay, M\u00e2con-Verz\u00e9, Maison Auvigue*\",\n      \"type_name\": \"White\",\n      \"region\": \"M\u00e2con-Verz\u00e9\","}, "timestamp": 1770493713817}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "wine_manager.py:330", "message": "JSON parse error, attempting recovery", "data": {"error": "Expecting property name enclosed in double quotes: line 36 column 31 (char 880)", "error_pos": 880}, "timestamp": 1770493713817}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "F", "location": "wine_manager.py:_recover_partial_json", "message": "Starting recovery", "data": {"json_length": 880, "first_500": "{\n  \"wines\": [\n    {\n      \"wine_name\": \"Gros Manseng 'Cos De La Roque', Gascogne, Domaine Saint Lannes\",\n      \"type_name\": \"White\",\n      \"region\": \"Gascogne\",\n      \"winery\": \"Domaine Saint Lannes\",\n      \"country\": \"France\",\n      \"grapes\": [\n        \"Gros Manseng\"\n      ]\n    },\n    {\n      \"wine_name\": \"Riesling, 'Gravel', Rheingau, Weingut Faust*\",\n      \"type_name\": \"White\",\n      \"region\": \"Rheingau\",\n      \"winery\": \"Weingut Faust\",\n      \"country\": \"Germany\",\n      \"grapes\": [\n       ", "last_500": "ite\",\n      \"region\": \"Rheingau\",\n      \"winery\": \"Weingut Faust\",\n      \"country\": \"Germany\",\n      \"grapes\": [\n        \"Riesling\"\n      ]\n    },\n    {\n      \"wine_name\": \"Catarratto, Kima, Sicily, Possente*\",\n      \"type_name\": \"White\",\n      \"region\": \"Sicily\",\n      \"winery\": \"Possente\",\n      \"country\": \"Italy\",\n      \"grapes\": [\n        \"Catarratto\"\n      ]\n    },\n    {\n      \"wine_name\": \"Chardonnay, M\u00e2con-Verz\u00e9, Maison Auvigue*\",\n      \"type_name\": \"White\",\n      \"region\": \"M\u00e2con-Verz\u00e9\","}, "timestamp": 1770493713818}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "F", "location": "wine_manager.py:_recover_partial_json", "message": "Found wines array", "data": {"content_length": 866}, "timestamp": 1770493713818}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "F", "location": "wine_manager.py:_recover_partial_json", "message": "Found wine matches", "data": {"match_count": 4}, "timestamp": 1770493713820}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "F", "location": "wine_manager.py:_recover_partial_json", "message": "Recovery complete", "data": {"wine_count": 4}, "timestamp": 1770493713820}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "wine_manager.py:335", "message": "Recovery result", "data": {"wine_count": 4}, "timestamp": 1770493713821}
